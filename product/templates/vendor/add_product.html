<!-- templates/products/vendor/add_product.html -->
{% extends "base.html" %}

{% block title %}Add Product - SokHub{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <!-- Page Header -->
            <div class="mb-5">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{% url 'vendor_dashboard' %}">Dashboard</a></li>
                        <li class="breadcrumb-item"><a href="{% url 'vendor_product_list' %}">Products</a></li>
                        <li class="breadcrumb-item active">Add Product</li>
                    </ol>
                </nav>
                
                <h1 class="display-5 fw-bold">
                    <i class="fas fa-plus-circle me-2 text-success"></i> Add New Product
                </h1>
                <p class="lead text-muted">Fill in the details below to add a new product to your catalog</p>
            </div>

            <!-- Product Form -->
            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <form method="post" enctype="multipart/form-data" novalidate>
                        {% csrf_token %}
                        
                        <!-- Basic Information -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="mb-4 border-bottom pb-2">
                                    <i class="fas fa-info-circle me-2 text-success"></i> Basic Information
                                </h5>
                            </div>
                            
                            <!-- Product Name -->
                            <div class="col-md-8 mb-3">
                                <label class="form-label fw-bold">Product Name *</label>
                                {{ form.name }}
                                {% if form.name.errors %}
                                    <div class="text-danger small mt-1">{{ form.name.errors }}</div>
                                {% endif %}
                                <div class="form-text">
                                    Enter a clear and descriptive name for your product
                                </div>
                            </div>
                            
                            <!-- Category -->
                            <div class="col-md-4 mb-3">
                                <label class="form-label fw-bold">Category</label>
                                {{ form.category }}
                                {% if form.category.errors %}
                                    <div class="text-danger small mt-1">{{ form.category.errors }}</div>
                                {% endif %}
                            </div>
                            
                            <!-- Short Description -->
                            <div class="col-12 mb-3">
                                <label class="form-label fw-bold">Short Description</label>
                                {{ form.short_description }}
                                {% if form.short_description.errors %}
                                    <div class="text-danger small mt-1">{{ form.short_description.errors }}</div>
                                {% endif %}
                                <div class="form-text">
                                    Brief description that appears in product listings (max 300 characters)
                                </div>
                            </div>
                            
                            <!-- Full Description -->
                            <div class="col-12 mb-3">
                                <label class="form-label fw-bold">Full Description *</label>
                                {{ form.description }}
                                {% if form.description.errors %}
                                    <div class="text-danger small mt-1">{{ form.description.errors }}</div>
                                {% endif %}
                                <div class="form-text">
                                    Detailed product description. Include features, specifications, and usage instructions
                                </div>
                            </div>
                            
                            <!-- Tags -->
                            <div class="col-12 mb-3">
                                <label class="form-label fw-bold">Tags</label>
                                {{ form.tags }}
                                {% if form.tags.errors %}
                                    <div class="text-danger small mt-1">{{ form.tags.errors }}</div>
                                {% endif %}
                                <div class="form-text">
                                    Add relevant tags to help customers find your product
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pricing -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="mb-4 border-bottom pb-2">
                                    <i class="fas fa-tag me-2 text-success"></i> Pricing
                                </h5>
                            </div>
                            
                            <!-- Price -->
                            <div class="col-md-6 mb-3">
                                <label class="form-label fw-bold">Price (RWF) *</label>
                                {{ form.price }}
                                {% if form.price.errors %}
                                    <div class="text-danger small mt-1">{{ form.price.errors }}</div>
                                {% endif %}
                                <div class="form-text">
                                    Selling price of the product
                                </div>
                            </div>
                            
                            <!-- Compare Price -->
                            <div class="col-md-6 mb-3">
                                <label class="form-label fw-bold">Compare at Price (RWF)</label>
                                {{ form.compare_at_price }}
                                {% if form.compare_at_price.errors %}
                                    <div class="text-danger small mt-1">{{ form.compare_at_price.errors }}</div>
                                {% endif %}
                                <div class="form-text">
                                    Original price to show discount (optional)
                                </div>
                            </div>
                        </div>
                        
                        <!-- Inventory -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="mb-4 border-bottom pb-2">
                                    <i class="fas fa-boxes me-2 text-success"></i> Inventory
                                </h5>
                            </div>
                            
                            <!-- Track Inventory -->
                            <div class="col-md-6 mb-3">
                                <div class="form-check form-switch mb-3">
                                    {{ form.is_track_inventory }}
                                    <label class="form-check-label fw-bold" for="{{ form.is_track_inventory.id_for_label }}">
                                        Track Inventory
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Allow Backorder -->
                            <div class="col-md-6 mb-3">
                                <div class="form-check form-switch mb-3">
                                    {{ form.allow_backorder }}
                                    <label class="form-check-label fw-bold" for="{{ form.allow_backorder.id_for_label }}">
                                        Allow Backorder
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Quantity -->
                            <div class="col-md-4 mb-3">
                                <label class="form-label fw-bold">Quantity *</label>
                                {{ form.quantity }}
                                {% if form.quantity.errors %}
                                    <div class="text-danger small mt-1">{{ form.quantity.errors }}</div>
                                {% endif %}
                            </div>
                            
                            <!-- Low Stock Threshold -->
                            <div class="col-md-4 mb-3">
                                <label class="form-label fw-bold">Low Stock Alert</label>
                                {{ form.low_stock_threshold }}
                                {% if form.low_stock_threshold.errors %}
                                    <div class="text-danger small mt-1">{{ form.low_stock_threshold.errors }}</div>
                                {% endif %}
                                <div class="form-text">
                                    Get notified when stock is low
                                </div>
                            </div>
                            
                            <!-- Shipping -->
                            <div class="col-md-4 mb-3">
                                <div class="form-check form-switch mt-4">
                                    {{ form.requires_shipping }}
                                    <label class="form-check-label fw-bold" for="{{ form.requires_shipping.id_for_label }}">
                                        Requires Shipping
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Images -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="mb-4 border-bottom pb-2">
                                    <i class="fas fa-images me-2 text-success"></i> Images
                                </h5>
                            </div>
                            
                            <!-- Main Image -->
                            <div class="col-12 mb-3">
                                <label class="form-label fw-bold">Main Product Image</label>
                                {{ form.main_image }}
                                {% if form.main_image.errors %}
                                    <div class="text-danger small mt-1">{{ form.main_image.errors }}</div>
                                {% endif %}
                                <div class="form-text">
                                    Primary image that represents your product (recommended: 800x800px)
                                </div>
                            </div>
                        </div>
                        
                        <!-- Submit Buttons -->
                        <div class="d-flex justify-content-between mt-5">
                            <a href="{% url 'vendor_product_list' %}" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-2"></i> Cancel
                            </a>
                            <div>
                                <button type="submit" name="save_as_draft" class="btn btn-outline-success me-2">
                                    <i class="fas fa-save me-2"></i> Save as Draft
                                </button>
                                <button type="submit" name="save_and_publish" class="btn btn-success">
                                    <i class="fas fa-paper-plane me-2"></i> Save & Submit for Review
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Help Card -->
            <div class="card shadow-sm mt-4">
                <div class="card-body">
                    <h6 class="fw-bold mb-3">
                        <i class="fas fa-lightbulb me-2 text-warning"></i> Tips for Better Listings
                    </h6>
                    <ul class="mb-0">
                        <li class="mb-2">Use high-quality images from multiple angles</li>
                        <li class="mb-2">Write detailed descriptions with bullet points</li>
                        <li class="mb-2">Set competitive prices by researching similar products</li>
                        <li class="mb-2">Use relevant categories and tags for better visibility</li>
                        <li>Accurate inventory tracking prevents overselling</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Toggle inventory fields based on track inventory switch
    const trackInventory = document.getElementById('{{ form.is_track_inventory.id_for_label }}');
    const quantityField = document.getElementById('{{ form.quantity.id_for_label }}');
    const lowStockField = document.getElementById('{{ form.low_stock_threshold.id_for_label }}');
    const backorderField = document.getElementById('{{ form.allow_backorder.id_for_label }}');
    
    function toggleInventoryFields() {
        if (trackInventory.checked) {
            quantityField.disabled = false;
            lowStockField.disabled = false;
            backorderField.disabled = false;
        } else {
            quantityField.disabled = true;
            lowStockField.disabled = true;
            backorderField.disabled = true;
        }
    }
    
    if (trackInventory) {
        trackInventory.addEventListener('change', toggleInventoryFields);
        toggleInventoryFields(); // Initial call
    }
});
</script>
{% endblock %}